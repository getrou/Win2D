<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CanvasActiveLayer Class</title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="CanvasActiveLayer class" /><meta name="System.Keywords" content="Microsoft.Graphics.Canvas.CanvasActiveLayer class" /><meta name="System.Keywords" content="CanvasActiveLayer class, about CanvasActiveLayer class" /><meta name="Microsoft.Help.F1" content="Microsoft.Graphics.Canvas.CanvasActiveLayer" /><meta name="Microsoft.Help.Id" content="T:Microsoft.Graphics.Canvas.CanvasActiveLayer" /><meta name="Description" content="Layers can change opacity, apply opacity masks, or clip a group of drawing operations." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="Microsoft.Graphics.Canvas" /><meta name="file" content="T_Microsoft_Graphics_Canvas_CanvasActiveLayer" /><meta name="guid" content="T_Microsoft_Graphics_Canvas_CanvasActiveLayer" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Win2D documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="Introduction.htm" title="Win2D documentation" tocid="roottoc">Win2D documentation</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="APIReference.htm" title="API Reference" tocid="APIReference">API Reference</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="N_Microsoft_Graphics_Canvas.htm" title="Microsoft.Graphics.Canvas" tocid="N_Microsoft_Graphics_Canvas">Microsoft.Graphics.Canvas</a></div><div class="toclevel1 current" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="T_Microsoft_Graphics_Canvas_CanvasActiveLayer.htm" title="CanvasActiveLayer Class" tocid="T_Microsoft_Graphics_Canvas_CanvasActiveLayer">CanvasActiveLayer Class</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="Methods_T_Microsoft_Graphics_Canvas_CanvasActiveLayer.htm" title="CanvasActiveLayer Methods" tocid="Methods_T_Microsoft_Graphics_Canvas_CanvasActiveLayer">CanvasActiveLayer Methods</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn">CanvasActiveLayer Class</td></tr></table><span class="introStyle"></span> <div class="summary">Layers can change opacity, apply opacity masks, or clip a group of drawing operations.</div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Inheritance Hierarchy</span></div><div id="ID0RBSection" class="collapsibleSection"><span class="nolink">System<span id="LSTAC4CE02A_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTAC4CE02A_0?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Object</span><br />  <span class="selflink">Microsoft.Graphics.Canvas<span id="LSTAC4CE02A_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTAC4CE02A_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>CanvasActiveLayer</span><br /></div><p> </p>
    <strong>Namespace:</strong> 
   <a href="N_Microsoft_Graphics_Canvas.htm">Microsoft.Graphics.Canvas</a><br />
    <strong>Assembly:</strong>
   Microsoft.Graphics.Canvas (in Microsoft.Graphics.Canvas.dll) Version: 0.0.0.0<div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Syntax</span></div><div id="ID2RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID1EACA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EACA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID1EACA');return false;" title="Copy">Copy</a></div></div><div id="ID1EACA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class</span> <span class="identifier">CanvasActiveLayer</span> : <span class="identifier">IDisposable</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EACA");</script></div><p>The <span class="selflink">CanvasActiveLayer</span> type exposes the following members.</p><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Methods</span></div><div id="ID3RBSection" class="collapsibleSection"><table class="members" id="methodList"><tr><th class="iconColumn">
								 
							</th><th>Name</th><th>Description</th></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="M_Microsoft_Graphics_Canvas_CanvasActiveLayer_Dispose.htm">Dispose</a></td><td><div class="summary">Closes the layer, applying the specified blend and/or clip operations to everything that has been drawn inside it.</div></td></tr></table><a href="#PageHeader">Top</a></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Remarks</span></div><div id="ID4RBSection" class="collapsibleSection"><p>
          Layers are created by the <a href="Overload_Microsoft_Graphics_Canvas_CanvasDrawingSession_CreateLayer.htm">CreateLayer Overload</a>.
          They affect all drawing from the moment they are created up until the CanvasActiveLayer object is closed.
          In C# this is typically done with a 'using' statement:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EAOGBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID1EAOGBA');return false;" title="Copy">Copy</a></div></div><div id="ID1EAOGBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">using</span> (drawingSession.CreateLayer(opacityBrush, clipGeometry))
{
    drawingSession.FillRectangle(...);
    drawingSession.DrawLine(...);
    drawingSession.DrawText(...);
    <span class="highlight-comment">// etc.</span>
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EAOGBA");</script><p>In C++/CX, the 'delete' keyword is used:</p><div class="codeSnippetContainer"><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EAMGBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID1EAMGBA');return false;" title="Copy">Copy</a></div></div><div id="ID1EAMGBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">auto layer = drawingSession-&gt;CreateLayer(opacityBrush, clipGeometry);

drawingSession-&gt;FillRectangle(...);
drawingSession-&gt;DrawLine(...);
drawingSession-&gt;DrawText(...);
<span class="highlight-comment">// etc.</span>

delete layer;</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EAMGBA");</script><p>Layers can affect their contents in one or more of these ways:</p><ul><li>Modify opacity by a specified amount</li><li>Apply an opacity mask (using a brush that could contain a bitmap or gradient)</li><li>Clip to a rectangle</li><li>Clip to an arbitrarily complex region defined by a geometry</li></ul><p>
          When a layer uses a brush to specify an opacity mask, transparent portions of the mask 
          indicate the areas where the contents of the layer will be transparent, while opaque 
          portions of the mask indicate where the layer contents are visible. The RGB color of the 
          opacity mask is ignored.
        </p><p>
          If you are using a layer to apply an opacity mask to a single filled rectangle or 
          geometry, the same result can be achieved more efficiently by calling
          <a href="M_Microsoft_Graphics_Canvas_CanvasDrawingSession_FillRectangle_4.htm">FillRectangle(Rect, ICanvasBrush, ICanvasBrush)</a> 
          or <a href="M_Microsoft_Graphics_Canvas_CanvasDrawingSession_FillGeometry_1.htm">FillGeometry(CanvasGeometry, ICanvasBrush, ICanvasBrush)</a>.
        </p><p>
          There is a subtle but important difference between using a layer to change the opacity of a group
          of primitives, versus individually changing the opacity of each individual primitive. Consider
          this code which draws an opaque blue circle on top of a red square:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EAGGBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID1EAGGBA');return false;" title="Copy">Copy</a></div></div><div id="ID1EAGGBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// Opaque</span>
ds.FillRectangle(<span class="highlight-number">10</span>, <span class="highlight-number">10</span>, <span class="highlight-number">70</span>, <span class="highlight-number">70</span>, Colors.Red);
ds.FillCircle(<span class="highlight-number">70</span>, <span class="highlight-number">70</span>, <span class="highlight-number">40</span>, Colors.Blue);</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EAGGBA");</script><p>
          If we separately change each primitive to 50% alpha, the circle is blended over the top
          of the square, producing a mix of red and blue in the area where the shapes overlap:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EAEGBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID1EAEGBA');return false;" title="Copy">Copy</a></div></div><div id="ID1EAEGBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// Primitive opacity</span>
ds.FillRectangle(<span class="highlight-number">10</span>, <span class="highlight-number">10</span>, <span class="highlight-number">70</span>, <span class="highlight-number">70</span>, Color.FromArgb(<span class="highlight-number">128</span>, <span class="highlight-number">255</span>, <span class="highlight-number">0</span>, <span class="highlight-number">0</span>));
ds.FillCircle(<span class="highlight-number">70</span>, <span class="highlight-number">70</span>, <span class="highlight-number">40</span>, Color.FromArgb(<span class="highlight-number">128</span>, <span class="highlight-number">0</span>, <span class="highlight-number">0</span>, <span class="highlight-number">255</span>));</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EAEGBA");</script><p>
          But if we instead use a layer to specify 50% alpha, there is no blending between the square
          and circle. Blending happens between the entire layer and whatever background was previously
          drawn underneath it, but not between the individual shapes inside the layer:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EACGBA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID1EACGBA');return false;" title="Copy">Copy</a></div></div><div id="ID1EACGBA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-comment">// Layer opacity</span>
<span class="highlight-keyword">using</span> (ds.CreateLayer(<span class="highlight-number">0.5</span>f))
{
    ds.FillRectangle(<span class="highlight-number">10</span>, <span class="highlight-number">10</span>, <span class="highlight-number">70</span>, <span class="highlight-number">70</span>, Colors.Red);
    ds.FillCircle(<span class="highlight-number">70</span>, <span class="highlight-number">70</span>, <span class="highlight-number">40</span>, Colors.Blue);
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EACGBA");</script><p>
          This image shows the result of these three pieces of code,
          using a grey checker pattern as the background:
        </p><img src="../media/LayerOpacity.png" alt="Layer opacity diagram" /></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID5RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="N_Microsoft_Graphics_Canvas.htm">Microsoft.Graphics.Canvas Namespace</a></div><div class="seeAlsoStyle"><a href="Overload_Microsoft_Graphics_Canvas_CanvasDrawingSession_CreateLayer.htm">CreateLayer Overload</a></div><div class="seeAlsoStyle"><a href="M_Microsoft_Graphics_Canvas_CanvasDrawingSession_FillRectangle_4.htm">CanvasDrawingSession<span id="LSTAC4CE02A_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTAC4CE02A_2?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>FillRectangle(Rect, ICanvasBrush, ICanvasBrush)</a></div><div class="seeAlsoStyle"><a href="M_Microsoft_Graphics_Canvas_CanvasDrawingSession_FillRectangle_1.htm">CanvasDrawingSession<span id="LSTAC4CE02A_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTAC4CE02A_3?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>FillRectangle(Single, Single, Single, Single, ICanvasBrush, ICanvasBrush)</a></div><div class="seeAlsoStyle"><a href="M_Microsoft_Graphics_Canvas_CanvasDrawingSession_FillGeometry_3.htm">CanvasDrawingSession<span id="LSTAC4CE02A_4"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTAC4CE02A_4?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>FillGeometry(CanvasGeometry, Vector2, ICanvasBrush, ICanvasBrush)</a></div><div class="seeAlsoStyle"><a href="M_Microsoft_Graphics_Canvas_CanvasDrawingSession_FillGeometry_6.htm">CanvasDrawingSession<span id="LSTAC4CE02A_5"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTAC4CE02A_5?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>FillGeometry(CanvasGeometry, Single, Single, ICanvasBrush, ICanvasBrush)</a></div><div class="seeAlsoStyle"><a href="M_Microsoft_Graphics_Canvas_CanvasDrawingSession_FillGeometry_1.htm">CanvasDrawingSession<span id="LSTAC4CE02A_6"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTAC4CE02A_6?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>FillGeometry(CanvasGeometry, ICanvasBrush, ICanvasBrush)</a></div></div></div></div><div id="pageFooter" class="pageFooter"><p><a href="http://github.com/Microsoft/Win2D/blob/master/LICENSE.txt" target="_blank">Copyright (c) Microsoft Corporation. All rights reserved.</a></p> </div></body></html>