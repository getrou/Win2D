<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>PixelShaderEffect Constructor </title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="PixelShaderEffect class, constructor" /><meta name="System.Keywords" content="PixelShaderEffect.PixelShaderEffect constructor" /><meta name="Microsoft.Help.F1" content="Microsoft.Graphics.Canvas.Effects.PixelShaderEffect.#ctor" /><meta name="Microsoft.Help.F1" content="Microsoft.Graphics.Canvas.Effects.PixelShaderEffect.PixelShaderEffect" /><meta name="Microsoft.Help.Id" content="M:Microsoft.Graphics.Canvas.Effects.PixelShaderEffect.#ctor(System.Byte[])" /><meta name="Description" content="Initializes a new instance of the PixelShaderEffect class." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="Microsoft.Graphics.Canvas.Effects" /><meta name="file" content="M_Microsoft_Graphics_Canvas_Effects_PixelShaderEffect__ctor" /><meta name="guid" content="M_Microsoft_Graphics_Canvas_Effects_PixelShaderEffect__ctor" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Win2D documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="Introduction.htm" title="Win2D documentation" tocid="roottoc">Win2D documentation</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="APIReference.htm" title="API Reference" tocid="APIReference">API Reference</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="N_Microsoft_Graphics_Canvas_Effects.htm" title="Microsoft.Graphics.Canvas.Effects" tocid="N_Microsoft_Graphics_Canvas_Effects">Microsoft.Graphics.Canvas.Effects</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="T_Microsoft_Graphics_Canvas_Effects_PixelShaderEffect.htm" title="PixelShaderEffect Class" tocid="T_Microsoft_Graphics_Canvas_Effects_PixelShaderEffect">PixelShaderEffect Class</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="M_Microsoft_Graphics_Canvas_Effects_PixelShaderEffect__ctor.htm" title="PixelShaderEffect Constructor " tocid="M_Microsoft_Graphics_Canvas_Effects_PixelShaderEffect__ctor">PixelShaderEffect Constructor </a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="Properties_T_Microsoft_Graphics_Canvas_Effects_PixelShaderEffect.htm" title="PixelShaderEffect Properties" tocid="Properties_T_Microsoft_Graphics_Canvas_Effects_PixelShaderEffect">PixelShaderEffect Properties</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="Methods_T_Microsoft_Graphics_Canvas_Effects_PixelShaderEffect.htm" title="PixelShaderEffect Methods" tocid="Methods_T_Microsoft_Graphics_Canvas_Effects_PixelShaderEffect">PixelShaderEffect Methods</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn">PixelShaderEffect Constructor </td></tr></table><span class="introStyle"></span> <div class="summary">Initializes a new instance of the PixelShaderEffect class.</div><p> </p>
    <strong>Namespace:</strong> 
   <a href="N_Microsoft_Graphics_Canvas_Effects.htm">Microsoft.Graphics.Canvas.Effects</a><br />
    <strong>Assembly:</strong>
   Microsoft.Graphics.Canvas (in Microsoft.Graphics.Canvas.dll) Version: 0.0.0.0<div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Syntax</span></div><div id="ID1RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EACA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EACA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EACA');return false;" title="Copy">Copy</a></div></div><div id="ID0EACA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="keyword">public</span> <span class="identifier">PixelShaderEffect</span>(
	<span class="identifier">byte</span>[] <span class="parameter">shaderCode</span>
)</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EACA");</script><h4 class="subHeading">Parameters</h4><dl><dt><span class="parameter">shaderCode</span></dt><dd>Type: <span id="LST3BA607F0_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST3BA607F0_0?cpp=array&lt;");</script><span class="nolink">System<span id="LST3BA607F0_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST3BA607F0_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Byte</span><span id="LST3BA607F0_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LST3BA607F0_2?cpp=&gt;|vb=()|nu=[]");</script><br /></dd></dl></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Remarks</span></div><div id="ID2RBSection" class="collapsibleSection"><p>
          Custom pixel shaders are written in HLSL (High Level Shading Language) and 
          compiled with the Direct3D Shader Compiler (fxc.exe). This tool can be found in 
          the Visual Studio 2017 "Developer Command Prompt".
        </p><p>
          To compile your shader, invoke fxc twice using the options:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAMABA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EAMABA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAMABA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">set</span> INCLUDEPATH=<span class="highlight-literal">"%WindowsSdkDir%\Include\%WindowsSDKVersion%\um"</span>

fxc MyShader.hlsl /nologo /T lib_4_0_level_9_3_ps_only /D D2D_FUNCTION /D D2D_ENTRY=main /Fl MyShader.fxlib /I %INCLUDEPATH%
fxc MyShader.hlsl /nologo /T ps_4_0_level_9_3 /D D2D_FULL_SHADER /D D2D_ENTRY=main /E main /setprivate MyShader.fxlib /Fo:MyShader.bin /I %INCLUDEPATH%</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAMABA");</script><p>
          This generates a .bin file which can be included with your app, loaded (eg. via 
          File.ReadAllBytes) and passed to this constructor. It also generates a .fxlib 
          file, which is temporary and can be deleted.
        </p><p>
          The target profile "4_0_level_9_3" means Direct3D feature level 9.3, which is 
          compatible with Windows Phone. If you need more advanced shader capabilities 
          and do not care about supporting lower end hardware, remove the "_level_9_3" 
          part and build your shaders for "4_0" instead.
        </p><p>
          For a complete example of how to compile custom shaders, see 
          samples\ExampleGallery\Shared\Shaders\CompileShaders.cmd.
        </p><p>
          To integrate properly with Direct2D Image Effects, your shader should #include 
          "d2d1effecthelpers.hlsli" and use the helper macros it provides. Here is a 
          simple example that samples from a single input texture and multiplies by a 
          tint color:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EAHABA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EAHABA');return false;" title="Copy">Copy</a></div></div><div id="ID0EAHABA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-preprocessor">#define</span> D2D_INPUT_COUNT <span class="highlight-number">1</span>
<span class="highlight-preprocessor">#define</span> D2D_INPUT0_SIMPLE

<span class="highlight-preprocessor">#include</span> <span class="highlight-literal">"d2d1effecthelpers.hlsli"</span>

float4 tint;

D2D_PS_ENTRY(main)
{
    float4 color = D2DGetInput(<span class="highlight-number">0</span>);

    <span class="highlight-keyword">return</span> color * tint;
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EAHABA");</script><p>
          Defining the symbol D2D_INPUT{N}_SIMPLE indicates that texture input N 
          uses simple sampling, i.e. is always sampled at the same location as the pixel 
          being shaded. This define should be used when a texture is sampled by calling 
          D2DGetInput. Using it in your shader code will initialize the corresponding 
          <a href="T_Microsoft_Graphics_Canvas_Effects_SamplerCoordinateMapping.htm">SamplerCoordinateMapping</a> 
          property to OneToOne.
        </p><p>
          If your shader samples its texture in some other way than D2DGetInput, for 
          instance calling D2DSampleInputAtOffset or D2DSampleInputAtPosition, then you 
          should define D2D_INPUT{N}_COMPLEX to indicate that it is not a 1:1 
          texture coordinate mapping. This will initialize the corresponding
          <a href="T_Microsoft_Graphics_Canvas_Effects_SamplerCoordinateMapping.htm">SamplerCoordinateMapping</a> 
          property to Unknown. Depending on the behavior of your shader, you may wish to 
          change this to Offset, and set
          <a href="P_Microsoft_Graphics_Canvas_Effects_PixelShaderEffect_MaxSamplerOffset.htm">MaxSamplerOffset</a>
          to indicate the maximum number of pixels by which a texture coordinate will be 
          displaced.
        </p><p>
          For instance an edge detection shader that uses a 3x3 filter kernel (which has 
          a maximum offset of 1 pixel in any direction from the center tap) should 
          configure itself as:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EADABA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EADABA');return false;" title="Copy">Copy</a></div></div><div id="ID0EADABA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">var</span> effect = <span class="highlight-keyword">new</span> PixelShaderEffect(File.ReadAllBytes(<span class="highlight-literal">"MyShader.bin"</span>))
{
    Source1Mapping = SamplerCoordinateMapping.Offset,
    MaxSamplerOffset = <span class="highlight-number">1</span>
};</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EADABA");</script><p>
          Using SamplerCoordinateMapping.Offset can be more efficient than 
          SamplerCoordinateMapping.Unknown, as the extra knowledge allows the effect 
          runtime to break up large images into smaller tiles and skip computing unused 
          regions of the source images. But specifying this information wrongly (for 
          instance if your shader actually samples further away from the current pixel 
          than the specified MaxSamplerOffset) can give unpredictably wrong results.
          If in doubt, stick with SamplerCoordinateMapping.Unknown.
        </p><p>
          For more information see the shaders used by Example Gallery, and the MSDN articles:
        </p><ul><li><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/dn879811%28v=vs.85%29.aspx">HLSL Helpers</a></li><li><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/dn879810%28v=vs.85%29.aspx">Effect Shader Linking</a></li></ul></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID3RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="T_Microsoft_Graphics_Canvas_Effects_PixelShaderEffect.htm">PixelShaderEffect Class</a></div><div class="seeAlsoStyle"><a href="N_Microsoft_Graphics_Canvas_Effects.htm">Microsoft.Graphics.Canvas.Effects Namespace</a></div></div></div></div><div id="pageFooter" class="pageFooter"><p><a href="http://github.com/Microsoft/Win2D/blob/master/LICENSE.txt" target="_blank">Copyright (c) Microsoft Corporation. All rights reserved.</a></p> </div></body></html>