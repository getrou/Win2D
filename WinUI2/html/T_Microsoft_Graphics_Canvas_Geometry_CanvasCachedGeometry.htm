<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CanvasCachedGeometry Class</title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="CanvasCachedGeometry class" /><meta name="System.Keywords" content="Microsoft.Graphics.Canvas.Geometry.CanvasCachedGeometry class" /><meta name="System.Keywords" content="CanvasCachedGeometry class, about CanvasCachedGeometry class" /><meta name="Microsoft.Help.F1" content="Microsoft.Graphics.Canvas.Geometry.CanvasCachedGeometry" /><meta name="Microsoft.Help.Id" content="T:Microsoft.Graphics.Canvas.Geometry.CanvasCachedGeometry" /><meta name="Description" content="Cached geometries are a means of improving drawing performance of complicated geometry." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="Microsoft.Graphics.Canvas.Geometry" /><meta name="file" content="T_Microsoft_Graphics_Canvas_Geometry_CanvasCachedGeometry" /><meta name="guid" content="T_Microsoft_Graphics_Canvas_Geometry_CanvasCachedGeometry" /><link type="text/css" rel="stylesheet" href="../styles/highlight.css" /><script type="text/javascript" src="../scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Win2D documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="Introduction.htm" title="Win2D documentation" tocid="roottoc">Win2D documentation</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="APIReference.htm" title="API Reference" tocid="APIReference">API Reference</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="N_Microsoft_Graphics_Canvas_Geometry.htm" title="Microsoft.Graphics.Canvas.Geometry" tocid="N_Microsoft_Graphics_Canvas_Geometry">Microsoft.Graphics.Canvas.Geometry</a></div><div class="toclevel1 current" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="T_Microsoft_Graphics_Canvas_Geometry_CanvasCachedGeometry.htm" title="CanvasCachedGeometry Class" tocid="T_Microsoft_Graphics_Canvas_Geometry_CanvasCachedGeometry">CanvasCachedGeometry Class</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="Properties_T_Microsoft_Graphics_Canvas_Geometry_CanvasCachedGeometry.htm" title="CanvasCachedGeometry Properties" tocid="Properties_T_Microsoft_Graphics_Canvas_Geometry_CanvasCachedGeometry">CanvasCachedGeometry Properties</a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="Methods_T_Microsoft_Graphics_Canvas_Geometry_CanvasCachedGeometry.htm" title="CanvasCachedGeometry Methods" tocid="Methods_T_Microsoft_Graphics_Canvas_Geometry_CanvasCachedGeometry">CanvasCachedGeometry Methods</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="titleColumn">CanvasCachedGeometry Class</td></tr></table><span class="introStyle"></span> <div class="summary">Cached geometries are a means of improving drawing performance of complicated geometry.</div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Inheritance Hierarchy</span></div><div id="ID0RBSection" class="collapsibleSection"><span class="nolink">System<span id="LSTB17DB404_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTB17DB404_0?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Object</span><br />  <span class="selflink">Microsoft.Graphics.Canvas.Geometry<span id="LSTB17DB404_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTB17DB404_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>CanvasCachedGeometry</span><br /></div><p> </p>
    <strong>Namespace:</strong> 
   <a href="N_Microsoft_Graphics_Canvas_Geometry.htm">Microsoft.Graphics.Canvas.Geometry</a><br />
    <strong>Assembly:</strong>
   Microsoft.Graphics.Canvas (in Microsoft.Graphics.Canvas.dll) Version: 0.0.0.0<div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Syntax</span></div><div id="ID2RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID1EACA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EACA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID1EACA');return false;" title="Copy">Copy</a></div></div><div id="ID1EACA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="keyword">public</span> <span class="keyword">sealed</span> <span class="keyword">class</span> <span class="identifier">CanvasCachedGeometry</span> : <span class="identifier">IDisposable</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EACA");</script></div><p>The <span class="selflink">CanvasCachedGeometry</span> type exposes the following members.</p><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID3RB')" onkeypress="SectionExpandCollapse_CheckKey('ID3RB', event)" tabindex="0"><img id="ID3RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Properties</span></div><div id="ID3RBSection" class="collapsibleSection"><table class="members" id="propertyList"><tr><th class="iconColumn">
								 
							</th><th>Name</th><th>Description</th></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubproperty.gif" alt="Public property" title="Public property" /></td><td><a href="P_Microsoft_Graphics_Canvas_Geometry_CanvasCachedGeometry_Device.htm">Device</a></td><td><div class="summary">Gets the device associated with this CanvasCachedGeometry.</div></td></tr></table><a href="#PageHeader">Top</a></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Methods</span></div><div id="ID4RBSection" class="collapsibleSection"><table class="members" id="methodList"><tr><th class="iconColumn">
								 
							</th><th>Name</th><th>Description</th></tr><tr data="public;static;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /><img src="../icons/static.gif" alt="Static member" title="Static member" /></td><td><a href="M_Microsoft_Graphics_Canvas_Geometry_CanvasCachedGeometry_CreateFill.htm">CreateFill(CanvasGeometry)</a></td><td><div class="summary">Creates a new, cached version of the fill of a geometry.</div></td></tr><tr data="public;static;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /><img src="../icons/static.gif" alt="Static member" title="Static member" /></td><td><a href="M_Microsoft_Graphics_Canvas_Geometry_CanvasCachedGeometry_CreateFill_1.htm">CreateFill(CanvasGeometry, Single)</a></td><td><div class="summary">Creates a new, cached version of the fill of a geometry.</div></td></tr><tr data="public;static;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /><img src="../icons/static.gif" alt="Static member" title="Static member" /></td><td><a href="M_Microsoft_Graphics_Canvas_Geometry_CanvasCachedGeometry_CreateStroke.htm">CreateStroke(CanvasGeometry, Single)</a></td><td><div class="summary">Creates a new, cached version of the stroke of a geometry with the specified stroke width.</div></td></tr><tr data="public;static;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /><img src="../icons/static.gif" alt="Static member" title="Static member" /></td><td><a href="M_Microsoft_Graphics_Canvas_Geometry_CanvasCachedGeometry_CreateStroke_1.htm">CreateStroke(CanvasGeometry, Single, CanvasStrokeStyle)</a></td><td><div class="summary">Creates a new, cached version of the stroke of a geometry with the specified stroke width and stroke style.</div></td></tr><tr data="public;static;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /><img src="../icons/static.gif" alt="Static member" title="Static member" /></td><td><a href="M_Microsoft_Graphics_Canvas_Geometry_CanvasCachedGeometry_CreateStroke_2.htm">CreateStroke(CanvasGeometry, Single, CanvasStrokeStyle, Single)</a></td><td><div class="summary">Creates a new, cached version of the stroke of a geometry with the specified stroke width and stroke style.</div></td></tr><tr data="public;declared;notNetfw;"><td><img src="../icons/pubmethod.gif" alt="Public method" title="Public method" /></td><td><a href="M_Microsoft_Graphics_Canvas_Geometry_CanvasCachedGeometry_Dispose.htm">Dispose</a></td><td><div class="summary">Releases all resources used by the CanvasCachedGeometry.</div></td></tr></table><a href="#PageHeader">Top</a></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Remarks</span></div><div id="ID5RBSection" class="collapsibleSection"><p>
      	Cached geometries are slightly different from normal geometries. They are stored in a GPU hardware 
      	optimized format that doesn't allow operations like Widen or CombineWith. They can only be used for drawing.
      	</p><p>
      	Sometimes, CanvasCachedGeometry are more performance-costly to create than CanvasGeometry. However, it is
      	always faster to draw CanvasCachedGeometry. Therefore, the best way to use them is not to create them 
      	every frame! Moreover, it's not suitable for cases where the geometry is drawn only once. 
      	Rather, use cached geometry for cases where it makes sense to pay the one-time, up-front caching cost
      	so that it can be drawn cheaply many times. Create cached geometries when your app is loading its resources, 
      	and draw them in your draw routine. 
      	</p><p>
      	Cached geometries are created and drawn in the following way:      	
      	
        <div class="codeSnippetContainer"><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID1EAAIABA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID1EAAIABA');return false;" title="Copy">Copy</a></div></div><div id="ID1EAAIABA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">CanvasCachedGeometry cachedGeometry;

<span class="highlight-keyword">void</span> myWidget_CreateResources(CanvasControl sender, <span class="highlight-keyword">object</span> args)
{
    ...
      CanvasGeometry geometry = CanvasGeometry.CreateRectangle(sender, <span class="highlight-number">1</span>, <span class="highlight-number">1</span>, <span class="highlight-number">10</span>, <span class="highlight-number">10</span>);
      cachedGeometry = CanvasCachedGeometry.CreateFill(geometry);
}

<span class="highlight-keyword">void</span> myWidget_Draw(CanvasControl sender, CanvasDrawEventArgs args)
{
    args.DrawingSession.DrawCachedGeometry(cachedGeometry, Colors.Blue);
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID1EAAIABA");</script></p><p>
      	Cached geometries, like any resource, induce memory cost. Use them if geometry performance is expected to
      	be a problem.
      	</p><p>
      	When a geometry is cached, it cannot contain curves. All the curved parts are turned into roughly equivalent,
      	short, straight edges. This is called 'flattening'. Of course, this exact same operation occurs, internally,
      	in Direct2D during Fill/Draw for CanvasGeometry; the straight edges are simply too small to see. 
      	</p><p>      	
      	The flattening for cached geometry either explicitly or implicitly considers a 
      	'flattening tolerance'. A flattening tolerance is a threshold at which a part of a curve is turned into 
      	a straight edge. A smaller tolerance produces a more accurate result, at the expense of performance
      	and memory cost. A value of CanvasGeometry.DefaultFlatteningTolerance works for many common situations.
      	</p><p>
      	Cached geometries are associated with the device of the geometry that was used to create them.
      	</p><p>
      	While creating a cached geometry, if the source geometry extends 
      	outside of [-524,287, 524,287] DIPs along any axis, then the 
      	cached geometry may be clipped to those bounds. 
      	This clipping will be visible even if the cached geometry is later 
      	drawn scaled down to fit within the bounds. 
      	</p><p>
      	To draw massive cached geometries with no clipping, ensure that the
      	coordinate space of the source geometry fits within the above bounds,
      	and use a scale transform on the drawing session to scale it up.
      	</p><p>
      	For more information about the Direct2D implementation of cached geometries used by Win2D, see 
      	<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/dn363632%28v=vs.85%29.aspx">Geometry Realizations Overview</a>.
      	</p><p>
          When using <a href="Interop.htm">Direct2D interop</a>, this Win2D class
          corresponds to the Direct2D interface ID2D1GeometryRealization.
        </p></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID6RB')" onkeypress="SectionExpandCollapse_CheckKey('ID6RB', event)" tabindex="0"><img id="ID6RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID6RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="N_Microsoft_Graphics_Canvas_Geometry.htm">Microsoft.Graphics.Canvas.Geometry Namespace</a></div></div></div></div><div id="pageFooter" class="pageFooter"><p><a href="http://github.com/Microsoft/Win2D/blob/master/LICENSE.txt" target="_blank">Copyright (c) Microsoft Corporation. All rights reserved.</a></p> </div></body></html>